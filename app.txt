import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Stock Dashboard',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: StockDashboard(),
    );
  }
}

class StockDashboard extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Stocks'),
        actions: [
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              // Implement search functionality
              print('Searching...');
            },
          ),
          IconButton(
            icon: Icon(Icons.qr_code),
            onPressed: () {
              // Implement QR code scanning functionality
              print('Scanning QR code...');
            },
          ),
          CircleAvatar(
            child: Text('A'),
          ),
        ],
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                _buildMarketIndex('NIFTY 50', '24,323.85', '+21.70 (0.09%)', Colors.green),
                _buildMarketIndex('BANK NIFTY', '52,660.35', '-443.35 (0.83%)', Colors.red),
              ],
            ),
            SizedBox(height: 16),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                _buildButton('Explore', Icons.explore, () {
                  // Implement explore button action
                  print('Exploring...');
                }),
                _buildButton('Holdings', Icons.account_balance_wallet, () {
                  // Implement holdings button action
                  print('Viewing holdings...');
                }),
                _buildButton('Lubna\'s Watchlist', Icons.star, () {
                  // Implement Lubna's watchlist button action
                  print('Viewing Lubna\'s watchlist...');
                }),
              ],
            ),
            SizedBox(height: 16),
            Text('Most bought on Groww', style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
            SizedBox(height: 16),
            Expanded(
              child: GridView.count(
                crossAxisCount: 2,
                crossAxisSpacing: 16,
                mainAxisSpacing: 16,
                children: [
                  _buildStockCard('UCO Bank', '₹188.61', '+1.93 (1.03%)', Colors.green),
                  _buildStockCard('SBI', '₹1,648.10', '-79.05 (4.58%)', Colors.red),
                  _buildStockCard('Amazon', '₹188.23', '+10.51 (5.91%)', Colors.green),
                  _buildStockCard('Myntra', '₹491.05', '+72.30 (17.27%)', Colors.green),
                ],
              ),
            ),
          ],
        ),
      ),
      bottomNavigationBar: BottomNavigationBar(
        items: [
          BottomNavigationBarItem(
            icon: Icon(Icons.show_chart),
            label: 'Stocks',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.account_balance_wallet),
            label: 'Mutual Funds',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.payment),
            label: 'Pay',
          ),
        ],
      ),
    );
  }

  Widget _buildMarketIndex(String name, String value, String change, Color color) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(name, style: TextStyle(fontSize: 16)),
        SizedBox(height: 4),
        Text(value, style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold)),
        SizedBox(height: 4),
        Text(change, style: TextStyle(color: color)),
      ],
    );
  }

  Widget _buildButton(String text, IconData iconData, VoidCallback onPressed) {
    return TextButton.icon(
      onPressed: onPressed,
      icon: Icon(iconData, color: Colors.blue),
      label: Text(text, style: TextStyle(color: Colors.blue)),
    );
  }

  Widget _buildStockCard(String name, String value, String change, Color color) {
    // Determine color based on change (positive or negative)
    Color valueColor = change.startsWith('+') ? Colors.green : Colors.red;

    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(name, style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold)),
            SizedBox(height: 8),
            Text(value, style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold)),
            SizedBox(height: 8),
            Text(change, style: TextStyle(color: valueColor)),
          ],
        ),
      ),
    );
  }
}
